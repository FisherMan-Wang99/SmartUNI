<view class="page">

<!-- 顶部渐变标题栏 -->
<view class="header">
  <view class="header-title">智能选校助手</view>
  <view class="header-subtitle">AI 驱动的个性化推荐</view>
</view>
  
<view class="container">
  <!-- 学术成绩卡片 -->
  <view class="card">
    <view class="card-title">标化成绩</view>
    <view class="question-item">
      <view class="question-number">1.</view>
      <input placeholder="4分制，百分制皆可" value="{{gpa}}" bindinput="onInputGPA" class="input question-input"/>
    </view>
    <view class="question-item">
      <view class="question-number">2.</view>
      <picker mode="selector" range="{{testTypeOptions}}" bindchange="onTestTypeChange">
        <view class="picker question-picker">{{testType || "请选择考试类型"}}</view>
      </picker>
    </view>
    <view class="question-item">
      <view class="question-number">3.</view>
      <input placeholder="请输入考试成绩" value="{{testScore}}" bindinput="onInputTestScore" class="input question-input"/>
    </view>
    <view class="question-item">
      <view class="question-number">4.</view>
      <picker mode="selector" range="{{englishTestOptions}}" bindchange="onEnglishTestTypeChange">
        <view class="picker question-picker">{{englishTestType || "请选择英语考试类型"}}</view>
      </picker>
    </view>
    <view class="question-item">
      <view class="question-number">5.</view>
      <input placeholder="请输入英语成绩" value="{{englishScore}}" bindinput="onInputEnglishScore" class="input question-input"/>
    </view>
  </view>

  <!-- 活动经历卡片 -->
  <view class="card">
    <view class="card-title">活动经历</view>
    
    <!-- 课外科研 -->
    <view class="activity-section">
      <view class="activity-title">
        <span class="question-number">6.</span> 课外科研（包括独立研究）：
      </view>
      <view class="options-container">
        <block wx:for="{{researchTypeOptions}}" wx:key="index">
          <view class="option-item {{researchType.includes(item) ? 'checked' : ''}}" bindtap="onResearchTypeToggle" data-type="{{item}}">
            <view class="option-name">{{item}}</view>
            <view class="check-icon">{{researchType.includes(item) ? '✓' : ''}}</view>
          </view>
        </block>
      </view>
      <!-- 为每个选中的类型显示时长输入 -->
      <view wx:if="{{researchType.length > 0}}" class="durations-container">
        <block wx:for="{{researchType}}" wx:key="index">
          <view class="input-group">
            <view class="input-label">{{item}} 时长（月）：</view>
            <input type="digit" placeholder="请输入" value="{{researchExperiences[item]}}" bindinput="onInputResearchExperience" data-type="{{item}}" class="input short"/>
          </view>
        </block>
      </view>
    </view>
    
    <!-- 志愿者活动 -->
    <view class="activity-section">
      <view class="activity-title">
        <span class="question-number">7.</span> 志愿者活动（包括独立、非机构、学校组织活动）：
      </view>
      <view class="options-container">
        <block wx:for="{{volunteerTypeOptions}}" wx:key="index">
          <view class="option-item {{volunteerType.includes(item) ? 'checked' : ''}}" bindtap="onVolunteerTypeToggle" data-type="{{item}}">
            <view class="option-name">{{item}}</view>
            <view class="check-icon">{{volunteerType.includes(item) ? '✓' : ''}}</view>
          </view>
        </block>
      </view>
      <!-- 为每个选中的类型显示时长输入 -->
      <view wx:if="{{volunteerType.length > 0}}" class="durations-container">
        <block wx:for="{{volunteerType}}" wx:key="index">
          <view class="input-group">
            <view class="input-label">{{item}} 时长（月）：</view>
            <input type="digit" placeholder="请输入" value="{{volunteerExperiences[item]}}" bindinput="onInputVolunteerExperience" data-type="{{item}}" class="input short"/>
          </view>
        </block>
      </view>
    </view>
    
    <!-- 兼职、实习经历 -->
    <view class="activity-section">
      <view class="activity-title">
        <span class="question-number">8.</span> 兼职、实习经历（包括自己运营公众号等）：
      </view>
      <view class="options-container">
        <block wx:for="{{internshipTypeOptions}}" wx:key="index">
          <view class="option-item {{internshipType.includes(item) ? 'checked' : ''}}" bindtap="onInternshipTypeToggle" data-type="{{item}}">
            <view class="option-name">{{item}}</view>
            <view class="check-icon">{{internshipType.includes(item) ? '✓' : ''}}</view>
          </view>
        </block>
      </view>
      <!-- 为每个选中的类型显示时长输入 -->
      <view wx:if="{{internshipType.length > 0}}" class="durations-container">
        <block wx:for="{{internshipType}}" wx:key="index">
          <view class="input-group">
            <view class="input-label">{{item}} 时长（月）：</view>
            <input type="digit" placeholder="请输入" value="{{internshipExperiences[item]}}" bindinput="onInputInternshipExperience" data-type="{{item}}" class="input short"/>
          </view>
        </block>
      </view>
    </view>
    
    <!-- 艺术实践 -->
    <view class="activity-section">
      <view class="activity-title">
        <span class="question-number">9.</span> 艺术实践、练习：
      </view>
      <view class="options-container">
        <block wx:for="{{artPracticeTypeOptions}}" wx:key="index">
          <view class="option-item {{artPracticeType.includes(item) ? 'checked' : ''}}" bindtap="onArtPracticeTypeToggle" data-type="{{item}}">
            <view class="option-name">{{item}}</view>
            <view class="check-icon">{{artPracticeType.includes(item) ? '✓' : ''}}</view>
          </view>
        </block>
      </view>
      <!-- 为每个选中的类型显示时长输入 -->
      <view wx:if="{{artPracticeType.length > 0}}" class="durations-container">
        <block wx:for="{{artPracticeType}}" wx:key="index">
          <view class="input-group">
            <view class="input-label">{{item}} 时长（月）：</view>
            <input type="digit" placeholder="请输入" value="{{artPractices[item]}}" bindinput="onInputArtPractice" data-type="{{item}}" class="input short"/>
          </view>
        </block>
      </view>
    </view>
    
    <!-- 全职工作 -->
    <view class="activity-section">
      <view class="activity-title">
        <span class="question-number">10.</span> 全职工作：
      </view>
      <view class="options-container">
        <block wx:for="{{fullTimeWorkTypeOptions}}" wx:key="index">
          <view class="option-item {{fullTimeWorkType.includes(item) ? 'checked' : ''}}" bindtap="onFullTimeWorkTypeToggle" data-type="{{item}}">
            <view class="option-name">{{item}}</view>
            <view class="check-icon">{{fullTimeWorkType.includes(item) ? '✓' : ''}}</view>
          </view>
        </block>
      </view>
      <!-- 为每个选中的类型显示时长输入 -->
      <view wx:if="{{fullTimeWorkType.length > 0}}" class="durations-container">
        <block wx:for="{{fullTimeWorkType}}" wx:key="index">
          <view class="input-group">
            <view class="input-label">{{item}} 时长（月）：</view>
            <input type="digit" placeholder="请输入" value="{{fullTimeWorks[item]}}" bindinput="onInputFullTimeWork" data-type="{{item}}" class="input short"/>
          </view>
        </block>
      </view>
    </view>
    
    <!-- 校级及以上荣誉 -->
    <view class="activity-section">
      <view class="input-group">
        <view class="input-label">
          <span class="question-number">11.</span> 校级及以上荣誉：
        </view>
        <input placeholder="请输入荣誉情况，如：数学竞赛一等奖" value="{{honors}}" bindinput="onInputHonors" class="input full"/>
      </view>
    </view>
  </view>

  <!-- 学校偏好卡片 -->
  <view class="card">
    <view class="card-title">学校偏好</view>
    
    <!-- 职业兴趣排序题 -->
    <view class="sorting-section">
      <view class="sorting-title">
        <span class="question-number">12.</span> 请拖拽排序您的职业兴趣（从上到下为优先级从高到低）
      </view>
      
      <!-- 排序区域 - 直接显示所有职业兴趣 -->
      <view class="sorting-container">
        <view class="sorted-list">
          <block wx:for="{{selectedCareerInterests}}" wx:key="id">
            <view class="sorted-item {{index === isDragging ? 'dragging' : ''}}" data-index="{{index}}" bindtouchstart="onDragStart" bindtouchmove="onDragMove" bindtouchend="onDragEnd" style="transform: translateY({{index === isDragging ? dragY : 0}}rpx);">
                <view class="drag-handle">⋮⋮</view>
                <view class="sorted-name">{{index + 1}}. {{item.name}}</view>
              </view>
          </block>
        </view>
      </view>
    </view>
    <view class="question-item">
        <view class="question-number">13.</view>
        <view class="input-group full-width">
          <view class="input-label">位置：{{locationOptions[location]}}</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="0" max="4" value="{{location}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onLocationChange"/>
          </view>
          <view class="slider-labels">
            <text>大城市</text>
            <text>普通城市</text>
            <text>无所谓</text>
            <text>边郊</text>
            <text>乡村</text>
          </view>
        </view>
      </view>
    <view class="question-item">
        <view class="question-number">14.</view>
        <view class="input-group full-width">
          <view class="input-label">规模：{{schoolSizeOptions[schoolSize]}}</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="0" max="4" value="{{schoolSize}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onSchoolSizeChange"/>
          </view>
          <view class="slider-labels compact">
            <text>小</text>
            <text>偏小</text>
            <text>正常</text>
            <text>偏大</text>
            <text>大</text>
          </view>
        </view>
      </view>
    <view class="question-item">
        <view class="question-number">15.</view>
        <view class="input-group full-width">
          <view class="input-label">学费：¥{{tuition}}（拖动滑块调整）</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              
            </view>
            <slider min="10000" max="200000" value="{{tuition}}" show-value block-size="22" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onTuitionChange"/>
          </view>
          <view class="slider-labels">
            <text>10000</text>
            <text>50000</text>
            <text>100000</text>
            <text>150000</text>
            <text>200000</text>
          </view>
        </view>
      </view>
    <view class="question-item">
      <view class="question-number">16.</view>
      <picker mode="selector" range="{{majorOptions}}" bindchange="onMajorChange">
        <view class="picker question-picker">{{major || "请选择专业"}}</view>
      </picker>
    </view>
    <view class="question-item">
        <view class="question-number">17.</view>
        <view class="input-group full-width">
          <view class="input-label">师生关系：{{teacherStudentRatioOptions[teacherStudentRatio]}}</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="0" max="4" value="{{teacherStudentRatio}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onTeacherStudentRatioChange"/>
          </view>
          <view class="slider-labels">
            <text>极度关心</text>
            <text>比较关心</text>
            <text>一般</text>
            <text>比较自主</text>
            <text>极度自主</text>
          </view>
        </view>
      </view>
    <view class="question-item">
      <view class="question-number">18.</view>
      <view class="input-group full-width">
        <view class="input-label">学校氛围：{{schoolAtmosphereOptions[schoolAtmosphere]}}</view>
        <view class="slider-labels">
          <text>Party</text>
          <text>中性</text>
          <text>Nerdy</text>
        </view>
        <slider min="0" max="2" value="{{schoolAtmosphere}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onSchoolAtmosphereChange"/>
      </view>
    </view>
    <view class="question-item">
        <view class="question-number">19.</view>
        <view class="input-group full-width">
          <view class="input-label">国际化程度：{{internationalLevelOptions[internationalLevel]}}</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="0" max="4" value="{{internationalLevel}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onInternationalLevelChange"/>
          </view>
          <view class="slider-labels">
            <text>非常高</text>
            <text>比较高</text>
            <text>一般</text>
            <text>比较低</text>
            <text>非常低</text>
          </view>
        </view>
      </view>
  </view>

  <!-- 提交按钮 -->
  <button class="submit-btn" bindtap="onSubmit" loading="{{loading}}">
    提交并获取推荐
  </button>

  <!-- 骨架屏 Loading -->
  <view wx:if="{{loading}}" class="skeleton-card">
    <view class="skeleton-title"></view>
    <view class="skeleton-line"></view>
    <view class="skeleton-line short"></view>
    <view class="progress-bar">
      <view class="progress-fill" animation="{{progressAnim}}"></view>
    </view>
  </view>

</view>
</view>

