<view class="page">
  <!-- 顶部渐变标题栏 -->
  <view class="header">
    <view class="header-title">智能选校助手</view>
    <view class="header-subtitle">AI 驱动的个性化推荐</view>
  </view>
   
  <view class="container">
    <!-- 进度指示器 -->
    <view class="progress-indicator">
      <view class="progress-bar">
        <view class="progress-fill" style="width: 100%;"></view>
      </view>
      <view class="progress-steps">
        <view class="step">标化成绩</view>
        <view class="step">活动信息</view>
        <view class="step active">学校偏好</view>
      </view>
    </view>
    
    <!-- 学校偏好卡片 -->
    <view class="card">
      <view class="card-title">学校偏好</view>
      
      <!-- 职业兴趣排序题 -->
      <view class="sorting-section">
        <view class="sorting-title">
          <span class="question-number">12.</span> 请拖拽排序您的职业兴趣（从上到下为优先级从高到低）
        </view>
        
        <!-- 排序区域 -->
        <view class="sorting-container">
          <view class="sorted-list">
            <block wx:for="{{selectedCareerInterests}}" wx:key="id">
              <view class="sorted-item {{index === isDragging ? 'dragging' : ''}}" data-index="{{index}}" bindtouchstart="onDragStart" bindtouchmove="onDragMove" bindtouchend="onDragEnd" style="transform: translateY({{index === isDragging ? dragY : 0}}rpx);">
                <view class="drag-handle">≡</view>
                <view class="sorted-name">{{item.name}}</view>
                <view class="career-rank">{{index + 1}}</view>
              </view>
            </block>
          </view>
        </view>
      </view>
      
      <!-- 位置选择 -->
      <view class="question-item">
        <view class="question-number">13.</view>
        <view class="input-group full-width">
          <view class="input-label">位置：{{locationOptions[location]}}</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="0" max="4" value="{{location}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onLocationChange"/>
          </view>
          <view class="slider-labels">
            <text>大城市</text>
            <text>普通城市</text>
            <text>无所谓</text>
            <text>边郊</text>
            <text>乡村</text>
          </view>
        </view>
      </view>
      
      <!-- 规模选择 -->
      <view class="question-item">
        <view class="question-number">14.</view>
        <view class="input-group full-width">
          <view class="input-label">规模：{{schoolSizeOptions[schoolSize]}}</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="0" max="4" value="{{schoolSize}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onSchoolSizeChange"/>
          </view>
          <view class="slider-labels compact">
            <text>小</text>
            <text>偏小</text>
            <text>正常</text>
            <text>偏大</text>
            <text>大</text>
          </view>
        </view>
      </view>
      
      <!-- 学费选择 -->
      <view class="question-item">
        <view class="question-number">15.</view>
        <view class="input-group full-width">
          <view class="input-label">学费：¥{{tuition}}（拖动滑块调整）</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="10000" max="200000" value="{{tuition}}" show-value block-size="22" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onTuitionChange"/>
          </view>
          <view class="slider-labels">
            <text>10000</text>
            <text>50000</text>
            <text>100000</text>
            <text>150000</text>
            <text>200000</text>
          </view>
        </view>
      </view>
      
      <!-- 专业选择 -->
      <view class="question-item">
        <view class="question-number">16.</view>
        <picker mode="selector" range="{{majorOptions}}" bindchange="onMajorChange">
          <view class="question-picker">{{major || "请选择专业"}}</view>
        </picker>
      </view>
      
      <!-- 师生关系 -->
      <view class="question-item">
        <view class="question-number">17.</view>
        <view class="input-group full-width">
          <view class="input-label">师生关系：{{teacherStudentRatioOptions[teacherStudentRatio]}}</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="0" max="4" value="{{teacherStudentRatio}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onTeacherStudentRatioChange"/>
          </view>
          <view class="slider-labels">
            <text>极度自主</text>
            <text>比较自主</text>
            <text>一般</text>
            <text>比较关心</text>
            <text>极度关心</text>
          </view>
        </view>
      </view>
      
      <!-- 学校氛围 -->
      <view class="question-item">
        <view class="question-number">18.</view>
        <view class="input-group full-width">
          <view class="input-label">学校氛围：{{schoolAtmosphereOptions[schoolAtmosphere]}}</view>
          <view class="slider-labels">
            <text>Party</text>
            <text>中性</text>
            <text>Nerdy</text>
          </view>
          <slider min="0" max="2" value="{{schoolAtmosphere}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onSchoolAtmosphereChange"/>
        </view>
      </view>
      
      <!-- 国际化程度 -->
      <view class="question-item">
        <view class="question-number">19.</view>
        <view class="input-group full-width">
          <view class="input-label">国际化程度：{{internationalLevelOptions[internationalLevel]}}</view>
          <view class="slider-wrapper">
            <view class="slider-markers">
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
              <view class="marker"></view>
            </view>
            <slider min="0" max="4" value="{{internationalLevel}}" step="1" activeColor="#1a73e8" backgroundColor="#e0e0e0" bindchange="onInternationalLevelChange"/>
          </view>
          <view class="slider-labels">
            <text>非常低</text>
            <text>比较低</text>
            <text>一般</text>
            <text>比较高</text>
            <text>非常高</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 底部按钮 -->
    <view class="bottom-buttons">
      <button class="back-btn" bindtap="goBack">上一步</button>
      <button class="submit-btn" bindtap="onSubmit">获取AI选校结果</button>
    </view>
  </view>
</view>